<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Card Labels</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.25/css/jquery.dataTables.css">

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.24/js/jquery.dataTables.min.js"></script>
</head>
<style>

img {
      width: auto;
      height: auto;
      max-height:400px; 
      max-width:600px;
      aspect-ratio: attr(width) / attr(height);
    }

</style>
<body>



    <div class="container">


        <div class="row" style="margin-top: 200px;">
        </div>


        <div class="row">
          <div class="col-sm">

            <button id="reloadBtn" style="width:150px; height: 100px; background-color: green;">Reload Image</button>
         
          </div>

          <div class="col-sm">



                     <!--div id="imageView" style="position: relative;float: left; margin: 0px; cursor: pointer; border:3px solid yellow;"-->
                    <div id="imageView" style="position: relative; border:3px solid yellow;">
                    
                        <img id="selected-image" class="main-image" src="/static/project-test-images/dust/clean factory-0011.jpg" style="border:5px double black;" />

                    </div>
                        
                        

                        
                        <!--


                        <div class="card" style="border: 3px solid #218838; z-index: 1; position: absolute; background-color: transparent;">

                            <div class="card-header" style="background-color: #218838; color: white; top: 0px; left: 0px">
                                <strong>Chicken - 89%</strong>
                            </div>

                            <div class="card-body" style="top: 0px; left: 0px; width: 200px; height:150px;"></div>

                        </div>

                        <div class="card" style="top: 45px; left: 55px; width: 200px; height:150px; border: 3px solid red; z-index: 1; position: absolute; background-color: transparent;">
                        <div class="card-header" style="background-color: red; color: white;">
                            <strong>Chicken - 89%</strong>
                        </div>
                        </div>

                        <div class="card" style="background-color: magenta; color: white; top: 0px; left: 0px;  width: 200px; height:150px; border: 3px solid magenta; z-index: 1; position: absolute; background-color: transparent;">
                            <div class="card-header">
                            <strong>Chicken - 89%</strong>
                            </div>
                        </div>
                        
                        --->

          </div>

          <div class="col-sm">
            2
          </div>
        </div>
      </div>

    









    



<script>

window.addEventListener("load", function(){


 //  References
 // 	http://jsfiddle.net/6nLa19be/7/ and
 // 	https://www.youtube.com/watch?v=nm211NaGEmk 
 //	    https://www.youtube.com/watch?v=qLyeIU8iSfI
 //     https://codepen.io/mmm111/pen/wyGBLE?editors=1111


// select the image div
const main_image = document.getElementById('selected-image');
const image_view = document.getElementById('imageView');
   // const main_image = document.getElementsByClassName('main-image')[0]  // list first image from list of images
   
   //console.log(main_image)


// create the card (label) div - using top, left, width, height and border color
      // (a) Create header div - with label in header - with same color as border and text color either white or black

// append card div to img div
   
   
function createLabelCard(label){

	const labelCard = document.createElement('div')
	labelCard.setAttribute('class','card');
	labelCard.setAttribute('header','Chicken');
	labelCard.setAttribute('top','55px;');
	labelCard.setAttribute('left','30px;');
	labelCard.setAttribute('width','100px;');
	labelCard.setAttribute('height','200px;');
	labelCard.setAttribute('border','border: 3px solid pink;');
	// labelCard.style.borderColor = 'orange'
  labelCard.setAttribute('z-index',1)
  labelCard.setAttribute('position','absolute;')

  const toplabel = document.createElement('div')
  toplabel.setAttribute('color','orange;')
	toplabel.innerText = label 
      // append label to card

      labelCard.append(label)


	return labelCard;
  

}


// var newLabel = createLabelCard('BMW')

// main_image.appendChild(newLabel)

function simpleCard(){
  
    const labelCard = document.createElement('div')
    labelCard.className ="card"
    labelCard.style="top: -40px; left: 0px; width: 250px; height:340px; border: 3px solid green; z-index: 2; position: absolute; background-color: transparent;";
  
    const labelHeader = document.createElement('div')
    labelHeader.className="card-header"
    labelHeader.style="background-color: #218838; color: white;"
    labelHeader.innerText ='<strong> Football </strong>';
 
    labelCard.append(labelHeader);

  return labelCard;
  
}




function simpleCard2(){

  var colors = ['#ff0000', '#00ff00', '#0000ff','#ff3333', '#ffff00', '#ff6600'];

  var random_color = colors[Math.floor(Math.random() * colors.length)].toString() + ';';

  var labels = ['Tomato', 'Popcorn', 'Sugar','Mango', 'Kandolo', 'Football'];
  var random_label = labels[Math.floor(Math.random() * labels.length)].toString() + ';';


  
  const labelCard = document.createElement('div')
  labelCard.className ="card"
   
  var top = randomInteger(0, 100).toString() + 'px;';
  var left = randomInteger(20, 200).toString() + 'px;';
  var width = randomInteger(50, 350).toString() + 'px;'; 
  var height = randomInteger(50, 100).toString() + 'px;'; 


  // labelCard.style="top: -40px; left: 0px; width: 250px; height:340px; border: 3px solid green; z-index: 2; position: absolute; background-color: transparent;";
  labelCard.style="top: " + top +  "left: "+ left + " width: " + width + " height: "  + height + " border: 3px solid " + random_color + " z-index: 2; position: absolute; background-color: transparent;";
  const labelHeader = document.createElement('div')
  labelHeader.className="card-header"
  labelHeader.style="background-color: " + random_color + " color: white;  top: 0; left: 0;"
  labelHeader.innerHTML ="<strong> "+ random_label + " </strong>";
  labelHeader.style.fontSize = "12";

  labelCard.append(labelHeader);

return labelCard;

}


function randomInteger(min, max) {
  return Math.floor(Math.random() * (max - min + 1)) + min;
}


function remove_labelCards(){

    var cardElements = document.getElementsByClassName('card');

    for(var i = 0; i < cardElements.length; i++)  {
        
        cardElements[i]?.remove()
    }
}

function remove_labelCards2(){

  $('.main-image').children('.card').remove();

}

// var mylabel = simpleCard()

// image_view.appendChild(mylabel)

// alert(mylabel.Header.height)

function addLabels(){

        for (let i = 0; i < 3; i++) {

            var mylabel = simpleCard2()

            image_view.appendChild(mylabel)

        }
}


function removeAllLabels(){
    const elements = document.getElementsByClassName("card");
    while(elements.length > 0){
        elements[0].parentNode.removeChild(elements[0]);
    }
}



function testLabels(){

    // TESTING THE LABELING

    // 1) Add Labels to Image
    addLabels();

    // 2) Remove labels after 5 seconds
    //setTimeout(remove_labelCards2, 5000);

    setTimeout(removeAllLabels,5000)

    // 3) Add labels after another 10 seconds

    //setTimeout(addLabels, 15000);

    // 4) Remove labels after another 10 seconds
    // setTimeout(remove_labelCards, 25000);


}


//function myFunction() {

  // var images = ["/static/project-test-images/dust/clean factory-0011.jpg", "/static/project-test-images/dust/test-image2.jpg","/static/project-test-images/dust/_105772872_d0lwtbxxgaevn85.jp"]
  
  // var selected_img = images[Math.floor(Math.random() * images.length)].toString() + '';

  // alert(selected_img)
  //main_image.src = selected_img

  // $('#imageView').load(' #imageView')

 // alert('king')
  
//}


$("#reloadBtn").click(function(){

  // alert('Wena We Zulu....')

    var images = ["/static/project-test-images/dust/clean factory-0011.jpg", "/static/project-test-images/dust/test-image2.jpg","/static/project-test-images/dust/_105772872_d0lwtbxxgaevn85.jpg"]
      
    var selected_img = images[Math.floor(Math.random() * images.length)].toString() + '';

    main_image.src = selected_img

    //$("#img").load(" #img")
    
    $(".main-image").load(" .main-image")

    

    testLabels()

});




















});



</script>


</body>
</html>